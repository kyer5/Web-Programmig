<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>산수를 풀어 봅시다</title>
  <style>
      td {
          padding-left: 10px;
          padding-right: 10px;
      }
  </style>
  <script>
      function calc() {
          var total = 0;
          var questionArray = document.getElementsByClassName("question");
          var answerArray = document.getElementsByClassName("answer");

          for (let i = 0; i < questionArray.length; i++) {
              var question = questionArray[i].innerHTML;
              var correctAnswer = Math.floor(eval(question));
              var userAnswer = answerArray[i].value;
              if (userAnswer === "" || isNaN(userAnswer)) {
                  total += 0;
                  questionArray[i].style.textDecoration = "line-through";
              } else if (parseInt(userAnswer) === correctAnswer) {
                  total += 1;
                  questionArray[i].style.textDecoration = "none";
              } else {
                  total += 0;
                  questionArray[i].style.textDecoration = "line-through";
              }
          }
          document.getElementById("score").innerHTML = total;
      }

      function makeExpression() {
          var questionArray = document.getElementsByClassName("question");
          var answerArray = document.getElementsByClassName("answer");

          for (let i = 0; i < questionArray.length; i++) {
              var num1 = Math.floor(Math.random() * 20) + 1;
              var num2 = Math.floor(Math.random() * 20) + 1;
              var op = Math.floor(Math.random() * 4);
              var operator = "+";
              switch (op) {
                  case 0:
                      operator = "+";
                      break;
                  case 1:
                      operator = "-";
                      break;
                  case 2:
                      operator = "*";
                      break;
                  case 3:
                      operator = "/";
                      num1 = num1 * num2; // 나누기 결과가 정수로 나오도록 함
                      break;
              }
              questionArray[i].innerHTML = num1 + operator + num2;
              questionArray[i].style.textDecoration = "none";
              answerArray[i].value = "";
              document.getElementById("score").innerHTML = 0;
          }
      }
  </script>
</head>
<body onload="makeExpression()">
<h3>산수 문제를 풀어 봅시다.</h3>
자동으로 문제가 만들어집니다.
답 입력 후 채점 버튼을 누르세요.
다시 버튼을 누르면 새로운 문제가 출력됩니다.
나누기 결과는 정수입니다.
<hr>
<form>
  <table>
    <tr>
      <td class="question"></td>
      <td><input class="answer" type="text" size="8"></td>
    </tr>
    <tr>
      <td class="question"></td>
      <td><input class="answer" type="text" size="8"></td>
    </tr>
    <tr>
      <td class="question"></td>
      <td><input class="answer" type="text" size="8"></td>
    </tr>
    <tr>
      <td class="question"></td>
      <td><input class="answer" type="text" size="8"></td>
    </tr>
    <tr>
      <td>
        <button type="button" onclick="calc()">채점</button>
      </td>
      <td>
        <span id="score">0</span>
        <button type="button" onclick="makeExpression()">다시</button>
      </td>
    </tr>
  </table>
</form>
</body>
</html>
